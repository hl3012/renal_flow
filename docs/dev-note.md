**RenalFlow** *- From daily metrics to better kidney care*



# å‰æœŸå‡†å¤‡

## åŠŸèƒ½åˆ—è¡¨

### ç”¨æˆ·è´¦å·ç®¡ç†

-   **æ³¨å†Œ / ç™»å½•**ï¼šé‚®ç®± + å¯†ç æ³¨å†Œï¼ŒJWT ç™»å½•è®¤è¯
-   **å¯†ç å®‰å…¨**ï¼šå¯†ç åŠ å¯†ï¼ˆbcryptï¼‰ï¼Œå¯é€‰å¯†ç é‡ç½®
-   **ç”¨æˆ·èµ„æ–™ç®¡ç†**ï¼šåŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€å¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰ï¼›å¯é€‰æ…¢æ€§è‚¾ç—…ä¿¡æ¯ï¼ˆé˜¶æ®µã€åŒ»ç”Ÿè”ç³»æ–¹å¼ï¼‰



### å¥åº·æŒ‡æ ‡è®°å½•

-   **åŸºç¡€æŒ‡æ ‡ï¼ˆæ¯æ—¥å¯è®°å½•ï¼‰**ï¼šä½“é‡ã€ç¡çœ ã€é¥®æ°´é‡
-   **å…³é”®åŒ»å­¦æŒ‡æ ‡ï¼ˆå‘¨æœŸæ€§å½•å…¥ï¼‰**ï¼šè¡€å‹ã€å°¿å¸¸è§„ã€è‚¾åŠŸèƒ½ã€è¡€å¸¸è§„ç­‰ï¼ˆå‘¨æœŸ 3-6 ä¸ªæœˆï¼‰
-   **æ•°æ®éªŒè¯**ï¼šè¾“å…¥å€¼åˆæ³•æ€§æ£€æŸ¥
-   **å†å²è®°å½•ç®¡ç†**ï¼šå¢åˆ æ”¹æŸ¥



### æ•°æ®å¯è§†åŒ–

-   å†å²æ•°æ®æŠ˜çº¿å›¾ã€å¹³å‡å€¼å’Œå˜åŒ–ç‡
-   AIæ ¹æ®ç°æœ‰çš„æŒ‡æ ‡ä½œåŸºç¡€çš„å»ºè®® ï¼ˆä¾‹å¦‚è¡€å‹é«˜ â†’ å»ºè®®å°‘ç›ï¼‰



### æ—¥æœŸç®¡ç†

-   å¤æŸ¥æ—¥æœŸæé†’
-   å®¶åº­åŒ»ç”Ÿé¢è¯Šæ—¥æœŸæé†’



### æ•°æ®å¯¼å‡º

ä¸‹è½½ Excel / CSV



### æœ€æ–°ç ”ç©¶åˆ†äº«

-   è‡ªåŠ¨æŠ“å–æˆ–åå°ç®¡ç†ä¸Šä¼ æœ€æ–°è‚¾ç—…ç›¸å…³æ–°é—» ï¼ˆä¹Ÿå¯ä»¥äººå·¥ä¸Šä¼ æˆ–é€šè¿‡å¼€æ”¾API/RSSï¼‰
-   åˆ†äº«ç§‘ç ”æˆæœã€ä¸´åºŠæŒ‡å—ã€æ²»ç–—è¿›å±•
-   æ”¯æŒæŒ‰ä¸»é¢˜æˆ–æ—¶é—´ç­›é€‰



### ç¤¾åŒºè®ºå›

-   ç”¨æˆ·å¯å‘å¸–ã€è¯„è®ºã€ç‚¹èµ
-   åˆ†ç±»è®¨è®ºï¼šç»éªŒåˆ†äº«ã€é¥®é£Ÿã€è¿åŠ¨ã€ç”¨è¯ç®¡ç†
-   å¯åŒ¿åæˆ–å®å
-   çƒ­é—¨/æœ€æ–°å¸–å­æ’åº



## æŠ€æœ¯æ ˆ



### å‰ç«¯ï¼ˆæ‰‹æœº Appï¼‰

-   **æ¡†æ¶**ï¼šReact Native + TypeScript
-   **å¼€å‘å·¥å…·**ï¼šExpoï¼ˆå¿«é€Ÿæ„å»ºã€çƒ­é‡è½½ã€æ‰“åŒ…ã€å‘å¸ƒï¼‰
-   **é¡µé¢å¯¼èˆª**ï¼šReact Navigation
-   **å›¾è¡¨å¯è§†åŒ–**ï¼šVictory Native æˆ– React Native Charts Wrapper
-   **çŠ¶æ€ç®¡ç†**ï¼šZustand / Reduxï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼‰
-   **æ ·å¼å¸ƒå±€**ï¼šFlexbox + Tailwind RN / Styled Components



### åç«¯ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰

-   **æ¡†æ¶**ï¼šNode.js + Express + TypeScript
-   **è®¤è¯ä¸å®‰å…¨**ï¼š
    -   JWTï¼ˆç”¨æˆ·è®¤è¯ä¸æˆæƒï¼‰
    -   bcryptï¼ˆå¯†ç åŠ å¯†ï¼‰
-   **å®šæ—¶ä»»åŠ¡**ï¼šnode-cron / node-scheduleï¼ˆç ”ç©¶èµ„è®¯å®šæ—¶æ›´æ–°ï¼‰
-   **API è¯·æ±‚**ï¼šAxios / fetchï¼ˆApp è°ƒç”¨åç«¯æ¥å£ï¼‰



### æ•°æ®å­˜å‚¨

-   **æ•°æ®åº“**ï¼šMongoDB / AWS DocumentDB
    -   å­˜å‚¨å¥åº·æŒ‡æ ‡ã€è®ºå›å¸–å­ã€èµ„è®¯å†…å®¹
    -   æ–‡æ¡£å‹æ•°æ®åº“ï¼Œé€‚åˆ JSON æ ¼å¼æ•°æ®
-   **æœ¬åœ°ç¼“å­˜**ï¼ˆå¯é€‰ï¼‰ï¼šAsyncStorage æˆ– SQLiteï¼Œç”¨äºç¦»çº¿æ•°æ®



### æµ‹è¯•

-   **å‰ç«¯ç»„ä»¶**ï¼šJest + React Native Testing Library
-   **åç«¯ API**ï¼šJest + Supertest æˆ– Mocha + Chai
-   **è¦†ç›–èŒƒå›´**ï¼šå‰åç«¯æ ¸å¿ƒåŠŸèƒ½ï¼Œä¿è¯æ•°æ®æ­£ç¡®æ€§



### éƒ¨ç½²ï¼ˆAWS + Expoï¼‰

-   **å‰ç«¯**ï¼š
    -   ç”¨ **Expo æ‰“åŒ… App**
    -   å‘å¸ƒåˆ° iOS / Android æµ‹è¯•ç”¨æˆ·
-   **åç«¯**ï¼š
    -   AWS Elastic Beanstalk / EC2 éƒ¨ç½² Node.js + Express
    -   API æä¾›ç»™ App è°ƒç”¨
-   **æ•°æ®åº“**ï¼š
    -   AWS DocumentDB / MongoDB Atlas æ‰˜ç®¡
-   **å®‰å…¨**ï¼š
    -   HTTPSï¼ˆElastic Beanstalk / API Gateway + ACM è¯ä¹¦ï¼‰
-   **CI/CD å¯é€‰**ï¼š
    -   GitHub + AWS CodePipeline / Expo OTA æ›´æ–°



### å…¶ä»–åŠŸèƒ½æŠ€æœ¯

-   **RSS / å…¬å…± API**ï¼šè·å–æœ€æ–°è‚¾ç—…æ–°é—»å’Œç ”ç©¶
-   **è®ºå›åŠŸèƒ½**ï¼šå¸–å­ã€è¯„è®ºã€ç‚¹èµï¼ˆåµŒå¥—æ–‡æ¡£ + MongoDB é›†åˆå¼•ç”¨ï¼‰
-   **æ•°æ®å¯¼å‡º**ï¼šç”Ÿæˆ CSV / Excelï¼ˆ`json2csv` æˆ– `xlsx` åº“ï¼‰



## é¡¹ç›®æµç¨‹



### **é˜¶æ®µ 0ï¼šæ˜ç¡®ç›®æ ‡**

-   **é¡¹ç›®å®šä½**ï¼šç®€åŒ–ç‰ˆå¥åº·ç®¡ç†ç³»ç»Ÿï¼Œä»¥æ…¢æ€§è‚¾ç—…ç”¨æˆ·ä¸ºæ ¸å¿ƒï¼ŒåŒ…å«ç¤¾åŒºå’Œèµ„è®¯æ¨¡å—
-   **é¡¹ç›®ç›®çš„**ï¼š
    -   ç»ƒä¹ å…¨æ ˆå¼€å‘ï¼ˆTypeScript + Node.js + React Nativeï¼‰
    -   å±•ç¤ºæŠ€æœ¯èƒ½åŠ›å’Œäº§å“æ€ç»´
    -   å¯ä½œä¸ºç®€å†äº®ç‚¹æˆ–ä½œå“å±•ç¤º

------

### **é˜¶æ®µ 1ï¼šåŸºç¡€å…¨æ ˆæ¡†æ¶æ­å»º**

-   **åˆå§‹åŒ–é¡¹ç›®**
    -   React Native + Expo + TypeScript åˆå§‹åŒ–å‰ç«¯ App
    -   Node.js + Express + TypeScript åˆå§‹åŒ–åç«¯
    -   MongoDB æœ¬åœ°æˆ–äº‘ç«¯æ•°æ®åº“è¿æ¥
-   **é¡¹ç›®ç»“æ„è§„åˆ’**
    -   å‰ç«¯æ–‡ä»¶å¤¹ï¼šç»„ä»¶ã€é¡µé¢ã€å¯¼èˆªã€çŠ¶æ€ç®¡ç†
    -   åç«¯æ–‡ä»¶å¤¹ï¼šè·¯ç”±ã€æ§åˆ¶å™¨ã€æ¨¡å‹ã€æœåŠ¡å±‚
-   **åŸºç¡€è¿è¡Œç¯å¢ƒ**
    -   å‰ç«¯èƒ½åœ¨æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºå¯åŠ¨
    -   åç«¯èƒ½å¯åŠ¨å¹¶è¿æ¥æ•°æ®åº“
    -   API æµ‹è¯•å·¥å…·ï¼ˆPostman / Insomniaï¼‰å‡†å¤‡å¥½



------

### **é˜¶æ®µ 2ï¼šæ ¸å¿ƒåŠŸèƒ½å®ç°**

-   **ç”¨æˆ·ç®¡ç†**
    -   æ³¨å†Œ / ç™»å½• / JWT éªŒè¯
    -   ç”¨æˆ·èµ„æ–™ç®¡ç†ï¼ˆå§“åã€æ€§åˆ«ã€æ…¢æ€§è‚¾ç—…é˜¶æ®µï¼‰
-   **å¥åº·æŒ‡æ ‡è®°å½•**
    -   åŸºç¡€æŒ‡æ ‡ï¼ˆæ¯æ—¥å¯è®°å½•ï¼‰ï¼šä½“é‡ã€ç¡çœ ã€é¥®æ°´é‡
    -   å…³é”®åŒ»å­¦æŒ‡æ ‡ï¼ˆå‘¨æœŸæ€§å½•å…¥ï¼‰ï¼šè¡€å‹ã€å°¿å¸¸è§„ã€è‚¾åŠŸèƒ½ç­‰
    -   CRUD + æ•°æ®éªŒè¯
-   **æ•°æ®å¯è§†åŒ–**
    -   æŠ˜çº¿å›¾å±•ç¤ºå†å²æ•°æ®
    -   è¶‹åŠ¿è®¡ç®—ï¼ˆå¹³å‡å€¼ã€å˜åŒ–ç‡ï¼‰
    -   åŸºç¡€è§„åˆ™å¼•æ“ AI æç¤ºï¼ˆä¾‹å¦‚è¡€å‹åé«˜ â†’ å»ºè®®å°‘ç›ï¼‰



------

### **é˜¶æ®µ 3ï¼šé™„åŠ åŠŸèƒ½**

-   **æ—¥æœŸæé†’**
    -   å¤æŸ¥æ—¥æœŸæé†’
    -   å®¶åº­åŒ»ç”Ÿé¢è¯Šæ—¥æœŸæé†’
    -   æ‰‹æœºæ¨é€é€šçŸ¥ï¼ˆReact Native Push Notificationsï¼‰
-   **ç¤¾åŒºè®ºå›**
    -   ç”¨æˆ·å¯å‘å¸–ã€è¯„è®ºã€ç‚¹èµ
    -   åˆ†ç±»è®¨è®ºï¼šç»éªŒåˆ†äº«ã€é¥®é£Ÿã€è¿åŠ¨ã€ç”¨è¯ç®¡ç†
    -   çƒ­é—¨ / æœ€æ–°å¸–å­æ’åº
-   **æœ€æ–°ç ”ç©¶ä¸èµ„è®¯**
    -   åˆæœŸï¼šäººå·¥ä¸Šä¼ æˆ–é€šè¿‡å…¬å¼€ RSS / API
    -   åæœŸï¼šå¯æ‰©å±•å®šæ—¶æŠ“å–æˆ–åå°ç®¡ç†ä¸Šä¼ 
    -   æ”¯æŒæŒ‰ä¸»é¢˜æˆ–æ—¶é—´ç­›é€‰
-   **æ•°æ®å¯¼å‡º**
    -   ç”Ÿæˆ CSV / Excelï¼ˆ`json2csv` æˆ– `xlsx` åº“ï¼‰

------

### **é˜¶æ®µ 4ï¼šæµ‹è¯•**

-   **å‰ç«¯ç»„ä»¶æµ‹è¯•**ï¼šJest + React Native Testing Library
-   **åç«¯ API æµ‹è¯•**ï¼šJest + Supertest / Mocha + Chai
-   ç›®æ ‡ï¼šè¦†ç›–ä¸»è¦åŠŸèƒ½ï¼Œä¿è¯æ•°æ®æ­£ç¡®æ€§

------

### **é˜¶æ®µ 5ï¼šéƒ¨ç½²**

-   **å‰ç«¯**ï¼š
    -   ç”¨ Expo æ‰“åŒ… App
    -   å‘å¸ƒåˆ° iOS / Android æµ‹è¯•ç”¨æˆ·
-   **åç«¯**ï¼š
    -   AWS Elastic Beanstalk / EC2 éƒ¨ç½² Node.js + Express
    -   API æä¾›ç»™ App è°ƒç”¨
-   **æ•°æ®åº“**ï¼š
    -   AWS DocumentDB / MongoDB Atlas æ‰˜ç®¡
-   **å®‰å…¨**ï¼š
    -   HTTPSï¼ˆElastic Beanstalk / API Gateway + ACM è¯ä¹¦ï¼‰
-   **CI/CD å¯é€‰**ï¼š
    -   GitHub + AWS CodePipeline / Expo OTA æ›´æ–°

------

### **é˜¶æ®µ 6ï¼šç®€å† / å±•ç¤ºä¼˜åŒ–**

-   é¡¹ç›®åç§° + tagline

-   åŠŸèƒ½åˆ—è¡¨å’Œæˆªå›¾ / GIF å±•ç¤ºç•Œé¢

-   æŠ€æœ¯æ ˆä¸äº®ç‚¹è¯´æ˜

-   é‡åŒ–å¯å±•ç¤ºåŠŸèƒ½ï¼š

    -   â€œæ”¯æŒæ¯æ—¥æŒ‡æ ‡è¿½è¸ªï¼ŒæŠ˜çº¿å›¾å¯è§†åŒ–è¶‹åŠ¿â€

    -   â€œè®ºå›å¸–å­äº’åŠ¨ï¼Œèµ„è®¯æ¨¡å—æŒ‰ä¸»é¢˜ç­›é€‰â€



### **é˜¶æ®µ 7ï¼šå‡çº§é˜¶æ®µ / é•¿æœŸä¼˜åŒ–**

-   **ç›®æ ‡**ï¼šæä¾›æ›´è‡ªç„¶çš„æ‰‹æœºä½“éªŒ
-   **åšæ³•**ï¼š
    -   æ¨é€é€šçŸ¥æé†’å¤æŸ¥å’Œé¢è¯Š
    -   ç›¸æœºæˆ–ä¼ æ„Ÿå™¨ï¼ˆå¯é€‰ä¸Šä¼ æµ‹é‡ç»“æœï¼‰
    -   ç¦»çº¿ç¼“å­˜å¥åº·æŒ‡æ ‡ï¼ˆAsyncStorage / SQLiteï¼‰
-   **ä¼˜åŠ¿**ï¼š
    -   æ›´è´´åˆç”¨æˆ·æ—¥å¸¸ä½¿ç”¨åœºæ™¯
    -   å‘å¸ƒåˆ° iOS å’Œ Android

## Github

å…‹éš†é¡¹ç›®

```
git clone git@github.com:hl3012/renal_flow.git
```

è¿›å…¥åˆ°å…‹éš†çš„æ–‡ä»¶å¤¹

åˆ›å»ºåˆ†æ”¯ ï¼ˆæŒ‰ç…§åŠŸèƒ½ï¼‰

```
git checkout -b feature/init-project
```



#  é¡¹ç›®åˆå§‹åŒ–





## åˆ›å»ºæ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„

åœ¨ä½ çš„æœ¬åœ°`RenalFlow`æ–‡ä»¶å¤¹ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºé¡¹ç›®ç»“æ„ï¼š

```
# è¿›å…¥ä½ çš„é¡¹ç›®æ ¹ç›®å½•
cd RenalFlow

# åˆ›å»ºä¸»è¦ç›®å½•ç»“æ„
mkdir mobile server docs

# åˆ›å»ºé‡è¦çš„é…ç½®æ–‡ä»¶
touch README.md .gitignore
```



ç°åœ¨ä½ çš„é¡¹ç›®ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

```
RenalFlow/
â”œâ”€â”€ mobile/          # å‰ç«¯React Nativeé¡¹ç›®
â”œâ”€â”€ server/          # åç«¯Node.jsé¡¹ç›®
â”œâ”€â”€ docs/            # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ README.md        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ .gitignore       # Gitå¿½ç•¥æ–‡ä»¶
```



## åˆå§‹åŒ–å‰ç«¯é¡¹ç›® (React Native + Expo)

```
# è¿›å…¥mobileç›®å½•
cd mobile

# ä½¿ç”¨Expoå’ŒTypeScriptæ¨¡æ¿åˆå§‹åŒ–é¡¹ç›®
npx create-expo-app@latest . --template

# é€‰æ‹©æ¨¡æ¿æ—¶ï¼Œä½¿ç”¨æ–¹å‘é”®é€‰æ‹© "Blank (TypeScript)"ï¼Œç„¶åæŒ‰å›è½¦
```



ç­‰å¾…åˆå§‹åŒ–å®Œæˆåï¼Œå®‰è£…ä¸€äº›å¿…è¦çš„ä¾èµ–ï¼š

```
# å¯¼èˆªç›¸å…³
npm install @react-navigation/native @react-navigation/stack
npx expo install react-native-screens react-native-safe-area-context

# çŠ¶æ€ç®¡ç† (Zustand)
npm install zustand

# å›¾è¡¨åº“
npm install victory-native
# æˆ–è€…å¦‚æœä¸Šé¢å®‰è£…æœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•
npx expo install react-native-svg
npm install victory-native

#
npm install axios
```



## åˆå§‹åŒ–åç«¯é¡¹ç›® (Node.js + Express + TypeScript)

```
# å›åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œç„¶åè¿›å…¥serverç›®å½•
cd ../server

# åˆå§‹åŒ–Node.jsé¡¹ç›®
npm init -y

# å®‰è£…ç”Ÿäº§ä¾èµ–
npm install express cors helmet morgan bcryptjs jsonwebtoken mongoose dotenv

# å®‰è£…TypeScriptå¼€å‘ä¾èµ–
npm install -D typescript @types/node @types/express @types/cors @types/bcryptjs @types/jsonwebtoken ts-node-dev

# åˆå§‹åŒ–TypeScripté…ç½®
npx tsc --init
```



ç°åœ¨é…ç½®TypeScriptï¼Œç¼–è¾‘`server/tsconfig.json`ï¼š

```
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```



åˆ›å»ºåç«¯æºä»£ç ç»“æ„ï¼š

```
# åœ¨serverç›®å½•ä¸‹åˆ›å»ºsrcæ–‡ä»¶å¤¹å’Œå­æ–‡ä»¶å¤¹
mkdir -p src/controllers src/models src/routes src/middleware src/services src/utils

# åˆ›å»ºä¸»è¦çš„æœåŠ¡å™¨æ–‡ä»¶
touch src/index.ts src/app.ts

# åˆ›å»ºç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
touch .env.example
```







## é…ç½®Gitå¿½ç•¥æ–‡ä»¶å’ŒREADME

ç¼–è¾‘æ ¹ç›®å½•çš„`.gitignore`æ–‡ä»¶ï¼š

```.gitignore
# Dependencies
node_modules/
*/node_modules/

# Production builds
dist/
*/dist/
*.tgz
*.tar.gz

# Environment variables
.env
*.env.local
*.env.development.local
*.env.test.local
*.env.production.local

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory used by tools like istanbul
coverage/
*.lcov

# Expo
.expo/
.expo-shared/

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# IDE
.vscode/
.idea/
*.swp
*.swo
*~
```



ç¼–è¾‘`README.md`æ–‡ä»¶ï¼š



## é…ç½®Package.jsonè„šæœ¬

ç¼–è¾‘`server/package.json`ï¼Œæ·»åŠ è¿™äº›scriptsï¼š

```json
"scripts": {
  "dev": "ts-node-dev --respawn --transpile-only src/index.ts",
  "build": "tsc",
  "start": "node dist/index.js",
  "clean": "rm -rf dist",
  "test": "echo \"Error: no test specified\" && exit 1"
}

```



## æœ€ç»ˆé¡¹ç›®ç»“æ„

```
RenalFlow/
â”œâ”€â”€ ğŸ“ mobile/                          # å‰ç«¯ React Native Expo é¡¹ç›®
â”‚   â”œâ”€â”€ ğŸ“ assets/                      # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ components/                  # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ screens/                     # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ navigation/                  # è·¯ç”±å¯¼èˆªé…ç½®
â”‚   â”œâ”€â”€ ğŸ“ store/                       # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ utils/                       # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.tsx                         # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ app.json                        # Expo é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json                    # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ tsconfig.json                   # å‰ç«¯ TypeScript é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ server/                          # åç«¯ Node.js Express API
â”‚   â”œâ”€â”€ ğŸ“ src/                         # æºä»£ç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“ controllers/             # æ§åˆ¶å™¨ï¼ˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/                  # æ•°æ®æ¨¡å‹ï¼ˆMongoose Schemasï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routes/                  # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/              # ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€éªŒè¯ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/                # æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ ğŸ“ types/                   # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ app.ts                      # Express åº”ç”¨é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts                    # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ .env.example                    # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ package.json                    # åç«¯ä¾èµ–
â”‚   â””â”€â”€ tsconfig.json                   # åç«¯ TypeScript é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ docs/                            # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                          # API æ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ SETUP.md                        # è®¾ç½®æŒ‡å—
â”‚   â””â”€â”€ ARCHITECTURE.md                 # æ¶æ„è¯´æ˜
â”‚
â”œâ”€â”€ .gitignore                         # Git å¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ README.md                          # é¡¹ç›®æ€»è¯´æ˜æ–‡æ¡£
â””â”€â”€ ğŸ“ .git/                           # Git ç‰ˆæœ¬æ§åˆ¶ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```





## é…ç½®axios

`./mobile/utils/axios.ts`

```ts
import axios from 'axios';

const api = axios.create({
  // Change this to your server URL
  baseURL: 'http://10.0.0.166:4000',
  timeout: 5000,
  headers: {
    'Content-Type': 'application/json',
  },
});


api.interceptors.request.use(
  async config => {
    const token = ''; 
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  error => Promise.reject(error)
);

export default api;

```



## æµ‹è¯•ä»£ç 

`./mobile/App.tsx`

```tsx
import { useEffect, useState } from 'react';
import { Text, View } from 'react-native';
import api from './utils/axios';

export default function App() {
  const [message, setMessage] = useState('');

  useEffect(() => {
    api.get('/api/health')
      .then(res => setMessage(res.data.message))
      .catch(() => setMessage('Error connecting to server'));
  }, []);

  return (
    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
      <Text>{message || 'Loading...'}</Text>
    </View>
  );
}
```

`./mobile/index.tsx`

```ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

```

`./server/src/app.ts`

```ts

import express from 'express';
import dotenv from 'dotenv';
import cors from 'cors';

dotenv.config();
const app = express();
app.use(cors());
app.get('/api/health', (req, res) => {
    res.json({status: 'ok', message:'RenalFlow server running'})
});

export default app;
```



åœ¨serveræ–‡ä»¶å¤¹ä¸‹

```
npm run dev
```

åœ¨mobileæ–‡ä»¶å¤¹ä¸‹

```
npx expo start
```

åœ¨æ‰‹æœºä¸Šä¸‹è½½Expo Go æ‰«æäºŒç»´ç 



# Git

```
# æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯ *å¼€å¤´çš„æ˜¯å½“å‰æ‰€åœ¨åˆ†æ”¯
git branch
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
git checkout -b feature/login       # æ–°åŠŸèƒ½åˆ†æ”¯
# åªæ˜¯åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
git checkout feature/login 
# ä¹‹åä½ ä¿®æ”¹æ–‡ä»¶ã€æäº¤
git add .
git commit -m "feat: add login page"
git push -u origin feature/login    # æ¨é€åˆ°è¿œç¨‹
```

æ›´æ–°é¡¹ç›®å‰ä»gitä¸Šæ‹‰å–æœ€æ–°çš„ä»£ç 

```
git checkout main
git pull origin main
git checkout MA
git merge main
```



# ç”¨æˆ·ç™»é™†æ³¨å†ŒåŠŸèƒ½

## åç«¯



## å‰ç«¯

### å‰ç«¯é¡µé¢ä¸»å…¥å£

```tsx
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import SplashScreen from './screens/SplashScreen';
import LoginScreen from './screens/LoginScreen';
import RegisterScreen from './screens/RegisterScreen';
import ForgotPasswordScreen from './screens/ForgotPasswordScreen';

export type RootStackParamList = {
  Splash: undefined;
  Login: undefined;
  Register: undefined;
  ForgotPassword: undefined;
  ResetPassword: { token: string }; 
};

const Stack = createStackNavigator<RootStackParamList>();

const App = () => (
  <NavigationContainer>
    <Stack.Navigator initialRouteName="Splash">
      <Stack.Screen name="Splash" component={SplashScreen} options={{ headerShown: false }} />
      <Stack.Screen name="Login" component={LoginScreen} options={{ headerShown: false }}/>
      <Stack.Screen name="Register" component={RegisterScreen} options={{ headerShown: false }}/>
      <Stack.Screen name="ForgotPassword" component={ForgotPasswordScreen} options={{ headerShown: false }}/>
    </Stack.Navigator>
  </NavigationContainer>
);

export default App;


```



### Appå¼€å¯åŠ¨ç”»é¡µé¢

`./mobile/screens/SplashScreen.tsx`

```tsx
import React, { useEffect, useRef } from 'react';
import { View, Text, Animated, StyleSheet, Image } from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { RootStackParamList } from '../App';
import { StackNavigationProp } from '@react-navigation/stack';

const SplashScreen = () => {
  type SplashScreenNavigationProp = StackNavigationProp<RootStackParamList, 'Splash'>;
  const navigation = useNavigation<SplashScreenNavigationProp>();
  const fadeAnim = useRef(new Animated.Value(0)).current;
  const scaleAnim = useRef(new Animated.Value(0.8)).current;

  useEffect(() => {
    Animated.parallel([
      Animated.timing(fadeAnim, {
        toValue: 1,
        duration: 1500,
        useNativeDriver: true,
      }),
      Animated.spring(scaleAnim, {
        toValue: 1,
        friction: 5,
        useNativeDriver: true,
      }),
    ]).start();

    const timer = setTimeout(() => {
      navigation.replace('Login');
    }, 2000);

    return () => clearTimeout(timer);
  }, []);

  return (
    <View style={styles.container}>
      <Animated.View
        style={{
          ...styles.logoContainer,
          opacity: fadeAnim,
          transform: [{ scale: scaleAnim }],
        }}
      >
        <Image source={require('../assets/Logo.png')} style={[styles.logo, { opacity: 0.6 }]} />
        <Text style={[styles.logoText, { opacity: 0.6 }]}>RenalFlow</Text>
        <Text style={styles.slogan}>From daily metrics to better kidney care</Text>
      </Animated.View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#000000ff', 
  },
  logoContainer: {
    justifyContent: 'center',
    alignItems: 'center',
  },
  logo: {
    width: 75, 
    height: 75,
    marginBottom: 5,
  },
  logoText: {
    fontSize: 28, 
    fontWeight: 'bold',
    color: '#2E7D32',
    textShadowColor: 'rgba(0,0,0,0.3)',
    textShadowOffset: { width: 2, height: 2 },
    textShadowRadius: 3,
  },
  slogan: {
    fontSize: 14, 
    color: '#a69f9f71', 
    marginTop: 5,
    textAlign: 'center',
  },
});

export default SplashScreen;

```

### ç”¨æˆ·ç™»å½•é¡µé¢

`./mobile/screens/LoginScreen.tsx`

```tsx
import React from 'react';
import { View, Text, TextInput, TouchableOpacity, StyleSheet } from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { StackNavigationProp } from '@react-navigation/stack';
import { RootStackParamList } from '../App';

type LoginScreenNavigationProp = StackNavigationProp<RootStackParamList, 'Login'>;

const LoginScreen = () => {
  const navigation = useNavigation<LoginScreenNavigationProp>();

  return (
    <View style={styles.container}>

      <Text style={styles.logoText}>RenalFlow</Text>


      <TextInput
        style={styles.input}
        placeholder="User Name"
        placeholderTextColor="rgba(255,255,255,0.5)"
      />
      <TextInput
        style={styles.input}
        placeholder="Password"
        placeholderTextColor="rgba(255,255,255,0.5)"
        secureTextEntry
      />


      <TouchableOpacity style={styles.button} onPress={() => {}}>
        <Text style={styles.buttonText}>Login</Text>
      </TouchableOpacity>


      <View style={styles.rowLinks}>
        <TouchableOpacity onPress={() => navigation.navigate('Register')}>
          <Text style={styles.linkText}>New User?</Text>
        </TouchableOpacity>
        <TouchableOpacity onPress={() => navigation.navigate('ForgotPassword')}>
          <Text style={styles.linkText}>Forgot Password?</Text>
        </TouchableOpacity>
      </View>


    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000000ff', // å’Œ Splash ä¸€è‡´
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 30,
  },
  logoText: {
    fontSize: 28,
    fontWeight: 'bold',
    color: '#2E7D32',
    marginBottom: 30,
    textShadowColor: 'rgba(0,0,0,0.3)',
    textShadowOffset: { width: 2, height: 2 },
    textShadowRadius: 3,
  },
  input: {
    width: '100%',
    height: 40,
    backgroundColor: 'rgba(255,255,255,0.1)',
    borderRadius: 8,
    paddingHorizontal: 12,
    marginVertical: 8,
    color: '#fff',
  },
  button: {
    width: '100%',
    backgroundColor: '#2E7D32',
    paddingVertical: 10,
    borderRadius: 8,
    marginTop: 15,
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 3 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 5,
  },
  buttonText: {
    color: '#fff',
    fontWeight: 'bold',
    fontSize: 16,
  },
  rowLinks: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    width: '100%',
    marginTop: 12,
  },
  linkText: {
    color: 'rgba(255,255,255,0.6)',
    fontSize: 13,
    textDecorationLine: 'underline',
  },
});

export default LoginScreen;

```



### ç”¨æˆ·æ³¨å†Œé¡µé¢

`./mobile/screens/RegisterScreen.tsx`

```tsx
import React, { useState } from 'react';
import { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert } from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { StackNavigationProp } from '@react-navigation/stack';
import { RootStackParamList } from '../App';
import api from '../utils/axios';

type RegisterScreenNavigationProp = StackNavigationProp<RootStackParamList, 'Register'>;

const RegisterScreen = () => {
  const navigation = useNavigation<RegisterScreenNavigationProp>();

  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');

  const handleRegister = async () => {
    if (password !== confirmPassword) {
      Alert.alert('Error', 'Passwords do not match');
      return;
    }
    try {
      const res = await api.post('/api/auth/register', { email, password });
      Alert.alert('Success', 'Registration successful');
      navigation.replace('Login'); 
    } catch (error: any) {
      Alert.alert('Error', error.response?.data?.message || 'Registration failed');
    }
  };

  return (
    <View style={styles.container}>
      <Text style={styles.logoText}>RenalFlow</Text>

      <TextInput
        style={styles.input}
        placeholder="Email"
        placeholderTextColor="rgba(255,255,255,0.5)"
        value={email}
        onChangeText={setEmail}
        keyboardType="email-address"
      />
      <TextInput
        style={styles.input}
        placeholder="Password"
        placeholderTextColor="rgba(255,255,255,0.5)"
        secureTextEntry
        value={password}
        onChangeText={setPassword}
      />
      <TextInput
        style={styles.input}
        placeholder="Confirm Password"
        placeholderTextColor="rgba(255,255,255,0.5)"
        secureTextEntry
        value={confirmPassword}
        onChangeText={setConfirmPassword}
      />

      <TouchableOpacity style={styles.button} onPress={handleRegister}>
        <Text style={styles.buttonText}>Register</Text>
      </TouchableOpacity>

      <TouchableOpacity style={styles.link} onPress={() => navigation.goBack()}>
        <Text style={styles.linkText}>Back to Login</Text>
      </TouchableOpacity>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000000ff', 
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 30,
  },
  logoText: {
    fontSize: 28,
    fontWeight: 'bold',
    color: '#2E7D32',
    marginBottom: 30,
    textShadowColor: 'rgba(0,0,0,0.3)',
    textShadowOffset: { width: 2, height: 2 },
    textShadowRadius: 3,
  },
  input: {
    width: '100%',
    height: 40,
    backgroundColor: 'rgba(255,255,255,0.1)',
    borderRadius: 8,
    paddingHorizontal: 12,
    marginVertical: 8,
    color: '#fff',
  },
  button: {
    width: '100%',
    backgroundColor: '#2E7D32',
    paddingVertical: 10,
    borderRadius: 8,
    marginTop: 15,
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 3 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 5,
  },
  buttonText: {
    color: '#fff',
    fontWeight: 'bold',
    fontSize: 16,
  },
  link: {
    marginTop: 12,
  },
  linkText: {
    color: 'rgba(255,255,255,0.6)',
    fontSize: 13,
    textDecorationLine: 'underline',
  },
});

export default RegisterScreen;

```

### é‡ç½®å¯†ç é¡µé¢

`./mobile/screens/ForgotPasswordScreen.tsx`

```jsx
import React, { useState } from 'react';
import { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert } from 'react-native';
import { StackNavigationProp } from '@react-navigation/stack';
import { useNavigation } from '@react-navigation/native';
import { RootStackParamList } from '../App';
import api from '../utils/axios';
import { Ionicons } from '@expo/vector-icons'; 

type ForgotResetScreenProp = StackNavigationProp<RootStackParamList, 'ForgotPassword'>;

const ForgotResetScreen = () => {
  const navigation = useNavigation<ForgotResetScreenProp>();
  const [stage, setStage] = useState<'email' | 'reset'>('email');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');

  const handleSendEmail = async () => {
    if (!email) {
      Alert.alert('Error', 'Please enter your email');
      return;
    }
    try {
      await api.post('/api/auth/forgot-password', { email });
      Alert.alert('Success', 'Password reset link sent to your email');
      setStage('reset'); 
    } catch (error: any) {
      Alert.alert('Error', error.response?.data?.message || 'Request failed');
    }
  };

  const handleResetPassword = async () => {
    if (!password || !confirmPassword) {
      Alert.alert('Error', 'Please fill in all fields');
      return;
    }
    if (password !== confirmPassword) {
      Alert.alert('Error', 'Passwords do not match');
      return;
    }
    try {
      await api.post('/api/auth/reset-password', { email, password });
      Alert.alert('Success', 'Password reset successful');
      navigation.goBack();
    } catch (error: any) {
      Alert.alert('Error', error.response?.data?.message || 'Reset failed');
    }
  };

  return (
    <View style={styles.container}>

      <TouchableOpacity
        style={styles.back}
        onPress={() => navigation.goBack()}
      >
        <Ionicons name="arrow-back" size={24} color="#fff" />
      </TouchableOpacity>

      <Text style={styles.logoText}>RenalFlow</Text>

      {stage === 'email' ? (
        <>
          <TextInput
            style={styles.input}
            placeholder="Enter your email"
            placeholderTextColor="rgba(255,255,255,0.5)"
            value={email}
            onChangeText={setEmail}
            keyboardType="email-address"
          />
          <TouchableOpacity style={styles.button} onPress={handleSendEmail}>
            <Text style={styles.buttonText}>Send Reset Link</Text>
          </TouchableOpacity>
        </>
      ) : (
        <>
          <TextInput
            style={styles.input}
            placeholder="New Password"
            placeholderTextColor="rgba(255,255,255,0.5)"
            secureTextEntry
            value={password}
            onChangeText={setPassword}
          />
          <TextInput
            style={styles.input}
            placeholder="Confirm Password"
            placeholderTextColor="rgba(255,255,255,0.5)"
            secureTextEntry
            value={confirmPassword}
            onChangeText={setConfirmPassword}
          />
          <TouchableOpacity style={styles.button} onPress={handleResetPassword}>
            <Text style={styles.buttonText}>Reset Password</Text>
          </TouchableOpacity>
        </>
      )}
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000000ff',
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 30,
  },
  back: {
    position: 'absolute',
    top: 50,
    left: 20,
  },
  logoText: {
    fontSize: 28,
    fontWeight: 'bold',
    color: '#2E7D32',
    marginBottom: 30,
    textShadowColor: 'rgba(0,0,0,0.3)',
    textShadowOffset: { width: 2, height: 2 },
    textShadowRadius: 3,
  },
  input: {
    width: '100%',
    height: 40,
    backgroundColor: 'rgba(255,255,255,0.1)',
    borderRadius: 8,
    paddingHorizontal: 12,
    marginVertical: 8,
    color: '#fff',
  },
  button: {
    width: '100%',
    backgroundColor: '#2E7D32',
    paddingVertical: 10,
    borderRadius: 8,
    marginTop: 15,
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 3 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 5,
  },
  buttonText: {
    color: '#fff',
    fontWeight: 'bold',
    fontSize: 16,
  },
});

export default ForgotResetScreen;

```



